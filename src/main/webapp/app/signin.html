<!doctype html>
<html class="no-js" lang="" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sign in</title>
    <link rel="shortcut icon" href="images/kpi-icon-cyan.png"/>
    <!-- Place favicon.ico in the root directory -->

    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="/bower_components/font-awesome/css/font-awesome.css" />
    <link rel="stylesheet" href="/bower_components/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" />
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/kpi.css">
    <!-- endbuild -->

    <!-- build:js scripts/vendor/modernizr.js -->
    <script src="/bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->
</head>
<body class="kpi-background-color kpi-signin-page-layout signin-body">
<!--[if IE]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->
<img src="images/kpi-logo.png" style="width: 100px;">
<br/>
<h4 class="text-white">Welcome to KPI System</h4>
<div class="signin-blank"></div>
<div class="signin-blank"></div>
<br/><br/>
<h3 class="text-white">Sign in</h3>
<br/>
<form id="login" v-on:submit="login" class="signin-form">
    <div v-show="invalidCredential" class="alert alert-danger alert-dismissable fade in signin-fail">
        <!--<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>-->
        Invalid username/password!
    </div>
    <br/>

    <div class="input-group input-group-lg signin-input-group">
        <span class="input-group-addon"><i class="fa fa-user"></i></span>
        <!-- process focus for input so that there is a outer highlight of it later - relate to box-shadow -->
        <input id="username" v-model="username" type="text" class="form-control" name="username" placeholder="Username or Email" required>
    </div>
    <br/>

    <div class="input-group input-group-lg signin-input-group">
        <span class="input-group-addon"><i class="fa fa-lock"></i></span>
        <input id="password" v-model="password" type="password" class="form-control" name="password" placeholder="Password" required>
    </div>
    <br/>

    <div class="input-group input-group-lg signin-input-group">
        <button type="submit" class="btn btn-lg btn-success signin-btn" id="signin">SIGN IN</button>
    </div>
    <br/>
    <a href="#" class="btn-link">Lost your password?</a>
</form>
<!-- build:js scripts/vendor.js -->
<!-- bower:js -->
<script src="/bower_components/modernizr/modernizr.js"></script>
<script src="/bower_components/jquery/dist/jquery.js"></script>
<script src="/bower_components/bootstrap/dist/js/bootstrap.js"></script>
<script src="/bower_components/vue/dist/vue.js"></script>
<script src="/bower_components/axios/dist/axios.js"></script>
<script src="/bower_components/vue-router/dist/vue-router.js"></script>
<!-- endbower -->
<!-- endbuild -->

<!-- build:js scripts/plugins.js -->
<!-- endbuild -->

<!-- build:js scripts/main.js -->
<script src="scripts/main.js"></script>
<!-- endbuild -->

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    (function (b, o, i, l, e, r) {
        b.GoogleAnalyticsObject = l;
        b[l] || (b[l] =
            function () {
                (b[l].q = b[l].q || []).push(arguments)
            });
        b[l].l = +new Date;
        e = o.createElement(i);
        r = o.getElementsByTagName(i)[0];
        e.src = 'https://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e, r)
    }(window, document, 'script', 'ga'));
    ga('create', 'UA-XXXXX-X');
    ga('send', 'pageview');

    const apiURL = '/login'

    let app = new Vue({
        el: '#login',
        data: {
            username: null,
            password: null,
            invalidCredential: false
        },
        methods: {
            login: function (event) {
                event.preventDefault();
                let self = this;
                axios.post(apiURL, {
                    username: this.username,
                    password: this.password
                })
                .then(function (response) {
                    window.location.replace("/");
                })
                .catch(function (error) {
                    self.invalidCredential = true;
                });
            }
        }
    })
</script>
</body>
<footer class="footer">
    <div class="container">
        <p>Â© 2017<a href="#"> KPI Team</a>, All rights reserved 2017-2018.</p>
    </div>
</footer>
</html>
